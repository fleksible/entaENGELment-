// Minified version of sensor-simulator.js
class SensorSimulator{constructor(){this.sensorData={accelX:0,accelY:0,accelZ:0,gyroX:0,gyroY:0,gyroZ:0},this.simulationSpeed=5,this.isSimulating=!1,this.simulationInterval=null,this.onDataUpdate=null,this.initializeUI()}initializeUI(){this.sliders={accelX:document.getElementById("accel-x-slider"),accelY:document.getElementById("accel-y-slider"),accelZ:document.getElementById("accel-z-slider"),gyroX:document.getElementById("gyro-x-slider"),gyroY:document.getElementById("gyro-y-slider"),gyroZ:document.getElementById("gyro-z-slider")},this.valueDisplays={accelX:document.getElementById("accel-x-value"),accelY:document.getElementById("accel-y-value"),accelZ:document.getElementById("accel-z-value"),gyroX:document.getElementById("gyro-x-value"),gyroY:document.getElementById("gyro-y-value"),gyroZ:document.getElementById("gyro-z-value")},this.startButton=document.getElementById("start-simulation"),this.stopButton=document.getElementById("stop-simulation"),this.randomButton=document.getElementById("random-values"),this.speedSlider=document.getElementById("sensor-speed"),this.setupEventListeners()}setupEventListeners(){for(const[e,t]of Object.entries(this.sliders))t.addEventListener("input",()=>{const s=parseFloat(t.value);this.updateSensorValue(e,s)});this.startButton.addEventListener("click",()=>this.startSimulation()),this.stopButton.addEventListener("click",()=>this.stopSimulation()),this.randomButton.addEventListener("click",()=>this.setRandomValues()),this.speedSlider.addEventListener("input",()=>{this.simulationSpeed=parseInt(this.speedSlider.value),this.isSimulating&&this.restartSimulation()})}updateSensorValue(e,t){const s=this.mapKeyToSensorData(e);this.sensorData[s]=t,this.valueDisplays[e]&&(this.valueDisplays[e].textContent=t.toFixed(2)),this.triggerDataUpdate()}mapKeyToSensorData(e){return{accelX:"accelX",accelY:"accelY",accelZ:"accelZ",gyroX:"gyroX",gyroY:"gyroY",gyroZ:"gyroZ"}[e]||e}setRandomValues(){for(const e of Object.keys(this.sliders)){const t=parseFloat(this.sliders[e].min),s=parseFloat(this.sliders[e].max),a=t+Math.random()*(s-t);this.sliders[e].value=a,this.updateSensorValue(e,a)}}startSimulation(){this.isSimulating||(this.isSimulating=!0,this.simulationInterval=setInterval(()=>{this.simulateStep()},1e3/this.simulationSpeed))}stopSimulation(){this.isSimulating&&(clearInterval(this.simulationInterval),this.isSimulating=!1)}restartSimulation(){this.stopSimulation(),this.startSimulation()}simulateStep(){const e=Date.now()/1e3,t=.05;for(const s of Object.keys(this.sliders)){const a=parseFloat(this.sliders[s].value),i=parseFloat(this.sliders[s].min),n=parseFloat(this.sliders[s].max),l=.5+.1*(s.charCodeAt(0)%5),o=Math.sin(e*l+s.length)*t;let r=a+o;r=Math.max(i,Math.min(n,r)),this.sliders[s].value=r,this.updateSensorValue(s,r)}}triggerDataUpdate(){"function"==typeof this.onDataUpdate&&this.onDataUpdate(this.sensorData);const e=new CustomEvent("sensor-data-updated",{detail:this.sensorData});document.dispatchEvent(e)}registerDataUpdateCallback(e){this.onDataUpdate=e}getSensorData(){return{...this.sensorData}}setSensorData(e){for(const[t,s]of Object.entries(e)){const e=this.mapSensorDataToKey(t);this.sliders[e]&&(this.sliders[e].value=s,this.updateSensorValue(e,s))}}mapSensorDataToKey(e){return{accelX:"accelX",accelY:"accelY",accelZ:"accelZ",gyroX:"gyroX",gyroY:"gyroY",gyroZ:"gyroZ"}[e]||e}mapSensorDataToFractalParams(){const e=1+.1*this.sensorData.accelZ,t=.05*this.sensorData.gyroY,s=-.05*this.sensorData.gyroX;return{zoomFactor:e,positionDeltaX:t,positionDeltaY:s}}}window.SensorSimulator=SensorSimulator;
