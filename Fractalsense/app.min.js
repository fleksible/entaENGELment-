// Minified version of app.js
document.addEventListener("DOMContentLoaded",()=>{initializeApp()});function initializeApp(){const e=new FractalVisualizer("fractal-canvas"),t=new SensorSimulator,a=new ResonanceEnhancer,n=new PresentationMode;connectModules(e,t,a,n),setupTabNavigation()}function connectModules(e,t,a,n){n.registerModules(e,t,a),t.registerDataUpdateCallback(t=>{const a=mapSensorDataToFractalParams(t);updateFractalWithSensorData(e,a)}),e.canvas.addEventListener("mousemove",()=>{const t=e.getParams(),a=new CustomEvent("fractal-updated",{detail:t});document.dispatchEvent(a)}),connectUIControls(e,t,a,n)}function mapSensorDataToFractalParams(e){const t=1+.1*e.accelZ,a=.05*e.gyroY,n=-.05*e.gyroX;return{zoomFactor:t,positionDeltaX:a,positionDeltaY:n}}function updateFractalWithSensorData(e,t){const a=e.getParams(),n=a.zoom*t.zoomFactor,o={x:a.center.x+t.positionDeltaX,y:a.center.y+t.positionDeltaY};e.updateParams({center:o,zoom:n})}function connectUIControls(e,t,a,n){connectFractalControls(e),document.querySelectorAll(".presentation-button").forEach(e=>{e.id==="prev-slide"?e.addEventListener("click",()=>n.previousSlide()):e.id==="next-slide"?e.addEventListener("click",()=>n.nextSlide()):e.id==="pause-presentation"&&e.addEventListener("click",()=>n.togglePause())});const o=document.createElement("button");o.className="control-button",o.textContent="PrÃ¤sentation starten",o.addEventListener("click",()=>n.startPresentation()),document.querySelectorAll(".tab-content").forEach(e=>{const t=e.querySelectorAll(".control-group");if(t.length>0){const e=t[t.length-1],a=e.querySelector(".button-group");if(a){const e=o.cloneNode(!0);e.addEventListener("click",()=>n.startPresentation()),a.appendChild(e)}}})}function connectFractalControls(e){const t=document.getElementById("zoom");t.addEventListener("input",()=>{const a=Math.pow(10,parseFloat(t.value)/50);e.updateParams({zoom:a})});const a=document.getElementById("position-x");a.addEventListener("input",()=>{const t=e.getParams(),n={x:parseFloat(a.value)/50,y:t.center.y};e.updateParams({center:n})});const n=document.getElementById("position-y");n.addEventListener("input",()=>{const t=e.getParams(),a={x:t.center.x,y:parseFloat(n.value)/50};e.updateParams({center:a})});const o=document.getElementById("reset-fractal");o.addEventListener("click",()=>{e.reset(),t.value=10,a.value=0,n.value=0});const r=document.getElementById("save-fractal");r.addEventListener("click",()=>{const t=e.canvas,a=document.createElement("a");a.download="fractalsense_"+Date.now()+".png",a.href=t.toDataURL("image/png"),a.click()});const c=document.getElementById("fractal-type");c.addEventListener("change",()=>{e.updateParams({fractalType:c.value})});const i=document.getElementById("iterations");i.addEventListener("input",()=>{e.updateParams({maxIterations:parseInt(i.value)})});const s=document.getElementById("resolution");s.addEventListener("input",()=>{e.updateParams({resolution:parseFloat(s.value)/500})})}function setupTabNavigation(){const e=document.querySelectorAll(".nav-tab"),t=document.querySelectorAll(".tab-content");e.forEach(a=>{a.addEventListener("click",()=>{e.forEach(e=>e.classList.remove("active")),a.classList.add("active");const n=a.getAttribute("data-tab");t.forEach(e=>{e.classList.remove("active"),e.id===n+"-tab"&&e.classList.add("active")})})})}
