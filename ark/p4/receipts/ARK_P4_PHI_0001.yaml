receipt:
  receipt_id: "ARK-P4-PHI-0001"
  created_local: "2026-01-23T00:00:00+01:00"

  test_case: "Φ* guard — saturable absorber intensity sweep validates physical threshold"
  component_under_test:
    name: "Φ* Guard"
    type: "graphene_on_sin_saturable_absorber"
    enforcement: "absorb_if_below_threshold"
  inputs:
    calset_id: "CALSET-PHI-0001"
    mapping_receipt_id: "ARK-MAP-PHI-0002"
  component_under_test:
    name: "Φ* Guard"
    type: "saturable_absorber"
    material: "graphene_on_sin"
    model: "T(I)=T0+(T_sat-T0)*I/(I+I_sat)"
    enforcement: "absorb_if_below_threshold"
  spec_parameters:
    T0_percent: 15
    T_sat_percent: 85
    I_sat_mW: 12.5
    phi_threshold: 0.72

  claims:
    - tag: "FACT"
      reason_code: "RC-PHY-ENFORCE"
      claim: "Guard is implemented physically via saturable absorber transmission barrier."
      evidence_ref: "ark_cephalo_manifest_v2.json:hardware_spec.layers.layer_1_optical_core.guards.phi_star_guard"
      evidence_ref: "ark_cephalo_manifest_v2.json#/hardware_spec/layers/layer_1_optical_core/guards/phi_star_guard"

    - tag: "SPEC"
      reason_code: "RC-SPEC-THRESH"
      claim: "Constraint: Φ* >= 0.72; below threshold light is absorbed."
      evidence_ref: "ark_cephalo_manifest_v2.json:governance_invariants.phi_star"
      evidence_ref: "ark_cephalo_manifest_v2.json#/governance_invariants/phi_star"

    - tag: "ACC"
      reason_code: "RC-CAL-MAP"
      claim: "Acceptance: T_sat reached at I corresponding to Φ* = 0.72 ± 0.02 as defined by ARK-MAP-PHI-0002."
      evidence_ref: "ark_cephalo_manifest_v2.json:validation.calibration_protocol.phi_guard"

  procedure:
      evidence_ref: "ark_cephalo_manifest_v2.json#/validation/calibration_protocol/phi_guard"

  procedure:
    setup:
      - "Laser @1550nm, variable attenuator, power meter, detector after absorber."
      - "Temperature stabilized mount; log ambient + device temp."
    calibration_assets:
      - "CALSET-PHI-0001: reference patterns for Φ* mapping"
    steps:
      - "Sweep incident intensity I from 0 → I_max across absorber (recommend 0..30 mW)."
      - "Record transmitted intensity T(I) and compute Φ* mapping per ARK-MAP-PHI-0002."
      - "Determine I_threshold where Φ* crosses 0.72."
      - "Repeat for >= 5 runs to estimate drift and hysteresis."
      - "For each point measure I_out, compute T=I_out/I_in."
      - "Fit T(I) to model; extract I_sat_fit and T0_fit, T_sat_fit."
      - "Record transmitted intensity T(I) and compute Φ* mapping per ARK-MAP-PHI-0002."
      - "Determine I_threshold where Φ* crosses 0.72."
      - "Repeat for >= 5 runs to estimate drift and hysteresis."
    controls:
      - "Repeat sweep 3x; require repeatability within ±2% absolute T."

  acceptance:
    pass_if_all:
      - "I_threshold stable within ±0.02 Φ* equivalent across runs."
      - "Below threshold: transmission <= 15% (absorbed)."
      - "Above threshold: transmission >= 85% (saturates)."
      - "I_sat_fit within ±10% of 12.5 mW."
      - "At mapped Φ*=0.72 intensity, T >= 0.80."
    fail_if_any:
      - "No clear saturation knee."
      - "Strong hysteresis not explained by thermal effects."

  outputs:
    raw_data_paths:
      - "evidence/raw/phi_guard/phi_sweep_YYYYMMDD.csv"
    hashes:
      calset_sha256: "TBD"
      raw_data_sha256: "TBD"
    plot_paths:
      - "evidence/plots/phi_guard/T_vs_I.png"
    hashes:
      calset_sha256: "TBD"
      raw_data_sha256: "TBD"
      plots_sha256: "TBD"

  audit:
    reviewer: "TBD"
