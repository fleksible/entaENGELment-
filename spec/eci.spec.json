{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "ECI Spec",
  "description": "Schema for Ethical Consent Index (ECI) vectors and calibration metadata.",
  "type": "object",
  "properties": {
    "version": { "type": "string" },
    "eci": {
      "type": "object",
      "properties": {
        "likert_norm": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "description": "Normalized explicit consent (Likert 1..7 -> 0..1)"
        },
        "behavior_proxy": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "description": "Normalized interaction proxy score"
        },
        "physio_proxy": {
          "type": ["number", "null"],
          "minimum": 0,
          "maximum": 1,
          "description": "Optional physio proxy (HRV/PLV) normalized"
        },
        "weights": {
          "type": "object",
          "properties": {
            "w_likert": { "type": "number" },
            "w_behavior": { "type": "number" },
            "w_physio": { "type": "number" }
          },
          "required": ["w_likert","w_behavior","w_physio"]
        },
        "eci_value": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        }
      },
      "required": ["likert_norm","behavior_proxy","weights","eci_value"]
    },
    "calibration": {
      "type": "object",
      "properties": {
        "bootstrap_ci": {
          "type": "array",
          "items": { "type": "number" },
          "description": "[lower, upper]"
        },
        "permutation_pvalue": { "type": "number" }
      }
    }
  },
  "required": ["version","eci"]
}
